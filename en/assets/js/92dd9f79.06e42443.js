"use strict";(self.webpackChunkcomputerization_website=self.webpackChunkcomputerization_website||[]).push([[2254],{6598:function(e,n,s){s.r(n),s.d(n,{Question:function(){return h},assets:function(){return o},contentTitle:function(){return r},frontMatter:function(){return i},metadata:function(){return l},toc:function(){return c}});var a=s(308),t=s(4997);const i={title:"Livestock Lineup",authors:"josh-cena",tags:["algorithm"]},r=void 0,l={permalink:"/en/blog/2020/12/02/algorithm5",source:"@site/i18n/en/docusaurus-plugin-content-blog/2020-12-02-algorithm5.mdx",title:"Livestock Lineup",description:"This is the fifth activity of Computerization algorithm team. Because the December USACO contest is almost there, we had some targeted practicing, starting with Bronze problems. Because members already have decent understanding, we chose a tough one. Bronze division problems only require mastery of loops, so a brute-force enumaration will always work, with no requirement of algorithms or data structures.",date:"2020-12-02T00:00:00.000Z",formattedDate:"December 2, 2020",tags:[{label:"algorithm",permalink:"/en/blog/tags/algorithm"}],readingTime:4.8,hasTruncateMarker:!0,authors:[{name:"Josh Cena",title:"Leader of Computerization '22",url:"https://github.com/Josh-Cena",imageURL:"https://github.com/Josh-Cena.png",key:"josh-cena"}],frontMatter:{title:"Livestock Lineup",authors:"josh-cena",tags:["algorithm"]},unlisted:!1,prevItem:{title:"OI \u90e8\u6d3b\u52a8-\u7f51\u7edc\u6d41\u95ee\u9898\u4ecb\u7ecd",permalink:"/en/blog/2021/11/24/network-flow"},nextItem:{title:"Factorial string",permalink:"/en/blog/2020/11/04/algorithm3"}},o={authorsImageUrls:[void 0]},c=[{value:"Problem",id:"problem",level:2},{value:"Solution",id:"solution",level:2},{value:"Program",id:"program",level:2}],h=({children:e,color:n})=>{const s=Object.assign({div:"div"},(0,t.ah)());return(0,a.jsx)(s.div,{style:{backgroundColor:n,borderRadius:"10px",color:"#fff",padding:"1em",marginBottom:"1em",marginTop:"1em"},children:e})};function m(e){const n=Object.assign({p:"p",h2:"h2",strong:"strong",span:"span",math:"math",semantics:"semantics",mrow:"mrow",mi:"mi",annotation:"annotation",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",mn:"mn",mo:"mo",code:"code",em:"em",pre:"pre"},(0,t.ah)(),e.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"This is the fifth activity of Computerization algorithm team. Because the December USACO contest is almost there, we had some targeted practicing, starting with Bronze problems. Because members already have decent understanding, we chose a tough one. Bronze division problems only require mastery of loops, so a brute-force enumaration will always work, with no requirement of algorithms or data structures."}),"\n","\n",(0,a.jsx)(n.h2,{id:"problem",children:"Problem"}),"\n",(0,a.jsxs)(h,{color:"#1d85c2",children:[(0,a.jsxs)(n.p,{children:["**Problem source: **",(0,a.jsx)("a",{href:"http://www.usaco.org/index.php?page=viewproblem2&cpid=965",children:(0,a.jsx)(n.strong,{children:"USACO 2019 December Bronze 3"})})]}),(0,a.jsx)(n.p,{children:"Every day, Farmer John milks his 8 dairy cows, named Bessie, Buttercup, Belinda, Beatrice, Bella, Blue, Betsy, and Sue."}),(0,a.jsxs)(n.p,{children:["The cows are rather picky, unfortunately, and require that Farmer John milks them in an order that respects ",(0,a.jsx)(n.span,{className:"math math-inline",children:(0,a.jsxs)(n.span,{className:"katex",children:[(0,a.jsx)(n.span,{className:"katex-mathml",children:(0,a.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(n.semantics,{children:[(0,a.jsx)(n.mrow,{children:(0,a.jsx)(n.mi,{children:"N"})}),(0,a.jsx)(n.annotation,{encoding:"application/x-tex",children:"N"})]})})}),(0,a.jsx)(n.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(n.span,{className:"base",children:[(0,a.jsx)(n.span,{className:"strut",style:{height:"0.6833em"}}),(0,a.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"N"})]})})]})}),' constraints. Each constraint is of the form "',(0,a.jsx)(n.span,{className:"math math-inline",children:(0,a.jsxs)(n.span,{className:"katex",children:[(0,a.jsx)(n.span,{className:"katex-mathml",children:(0,a.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(n.semantics,{children:[(0,a.jsx)(n.mrow,{children:(0,a.jsx)(n.mi,{children:"X"})}),(0,a.jsx)(n.annotation,{encoding:"application/x-tex",children:"X"})]})})}),(0,a.jsx)(n.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(n.span,{className:"base",children:[(0,a.jsx)(n.span,{className:"strut",style:{height:"0.6833em"}}),(0,a.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"X"})]})})]})})," must be milked beside ",(0,a.jsx)(n.span,{className:"math math-inline",children:(0,a.jsxs)(n.span,{className:"katex",children:[(0,a.jsx)(n.span,{className:"katex-mathml",children:(0,a.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(n.semantics,{children:[(0,a.jsx)(n.mrow,{children:(0,a.jsx)(n.mi,{children:"Y"})}),(0,a.jsx)(n.annotation,{encoding:"application/x-tex",children:"Y"})]})})}),(0,a.jsx)(n.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(n.span,{className:"base",children:[(0,a.jsx)(n.span,{className:"strut",style:{height:"0.6833em"}}),(0,a.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.22222em"},children:"Y"})]})})]})}),'", stipulating that cow ',(0,a.jsx)(n.span,{className:"math math-inline",children:(0,a.jsxs)(n.span,{className:"katex",children:[(0,a.jsx)(n.span,{className:"katex-mathml",children:(0,a.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(n.semantics,{children:[(0,a.jsx)(n.mrow,{children:(0,a.jsx)(n.mi,{children:"X"})}),(0,a.jsx)(n.annotation,{encoding:"application/x-tex",children:"X"})]})})}),(0,a.jsx)(n.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(n.span,{className:"base",children:[(0,a.jsx)(n.span,{className:"strut",style:{height:"0.6833em"}}),(0,a.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"X"})]})})]})})," must appear in the milking order either directly after cow ",(0,a.jsx)(n.span,{className:"math math-inline",children:(0,a.jsxs)(n.span,{className:"katex",children:[(0,a.jsx)(n.span,{className:"katex-mathml",children:(0,a.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(n.semantics,{children:[(0,a.jsx)(n.mrow,{children:(0,a.jsx)(n.mi,{children:"Y"})}),(0,a.jsx)(n.annotation,{encoding:"application/x-tex",children:"Y"})]})})}),(0,a.jsx)(n.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(n.span,{className:"base",children:[(0,a.jsx)(n.span,{className:"strut",style:{height:"0.6833em"}}),(0,a.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.22222em"},children:"Y"})]})})]})})," or directly before cow ",(0,a.jsx)(n.span,{className:"math math-inline",children:(0,a.jsxs)(n.span,{className:"katex",children:[(0,a.jsx)(n.span,{className:"katex-mathml",children:(0,a.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(n.semantics,{children:[(0,a.jsx)(n.mrow,{children:(0,a.jsx)(n.mi,{children:"Y"})}),(0,a.jsx)(n.annotation,{encoding:"application/x-tex",children:"Y"})]})})}),(0,a.jsx)(n.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(n.span,{className:"base",children:[(0,a.jsx)(n.span,{className:"strut",style:{height:"0.6833em"}}),(0,a.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.22222em"},children:"Y"})]})})]})}),"."]}),(0,a.jsx)(n.p,{children:"Please help Farmer John determine an ordering of his cows that satisfies all of these required constraints. It is guaranteed that an ordering is always possible. If several orderings work, then please output the one that is alphabetically first. That is, the first cow should have the alphabetically lowest name of all possible cows that could appear first in any valid ordering. Among all orderings starting with this same alphabetically-first cow, the second cow should be alphabetically lowest among all possible valid orderings, and so on."}),(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Input constraints"}),(0,a.jsx)(n.th,{children:"Memory limit"}),(0,a.jsx)(n.th,{children:"Execution time"})]})}),(0,a.jsx)(n.tbody,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.span,{className:"math math-inline",children:(0,a.jsxs)(n.span,{className:"katex",children:[(0,a.jsx)(n.span,{className:"katex-mathml",children:(0,a.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(n.semantics,{children:[(0,a.jsxs)(n.mrow,{children:[(0,a.jsx)(n.mn,{children:"1"}),(0,a.jsx)(n.mo,{children:"\u2264"}),(0,a.jsx)(n.mi,{children:"N"}),(0,a.jsx)(n.mo,{children:"\u2264"}),(0,a.jsx)(n.mn,{children:"7"})]}),(0,a.jsx)(n.annotation,{encoding:"application/x-tex",children:"1\\le N\\le 7"})]})})}),(0,a.jsxs)(n.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(n.span,{className:"base",children:[(0,a.jsx)(n.span,{className:"strut",style:{height:"0.7804em",verticalAlign:"-0.136em"}}),(0,a.jsx)(n.span,{className:"mord",children:"1"}),(0,a.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(n.span,{className:"mrel",children:"\u2264"}),(0,a.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(n.span,{className:"base",children:[(0,a.jsx)(n.span,{className:"strut",style:{height:"0.8193em",verticalAlign:"-0.136em"}}),(0,a.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"N"}),(0,a.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(n.span,{className:"mrel",children:"\u2264"}),(0,a.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(n.span,{className:"base",children:[(0,a.jsx)(n.span,{className:"strut",style:{height:"0.6444em"}}),(0,a.jsx)(n.span,{className:"mord",children:"7"})]})]})]})})}),(0,a.jsx)(n.td,{children:"256MB"}),(0,a.jsx)(n.td,{children:"2.0s"})]})})]})]}),"\n",(0,a.jsx)(n.h2,{id:"solution",children:"Solution"}),"\n",(0,a.jsxs)(n.p,{children:["Once we understand what the problem asks for\u2014generating a permutation with the smallest lexicographical order that satisfies the given constraints\u2014it should not be too hard. We can generate all permutations in lexicographical order (there are ",(0,a.jsx)(n.span,{className:"math math-inline",children:(0,a.jsxs)(n.span,{className:"katex",children:[(0,a.jsx)(n.span,{className:"katex-mathml",children:(0,a.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(n.semantics,{children:[(0,a.jsxs)(n.mrow,{children:[(0,a.jsx)(n.mn,{children:"8"}),(0,a.jsx)(n.mo,{stretchy:"false",children:"!"}),(0,a.jsx)(n.mo,{children:"="}),(0,a.jsx)(n.mn,{children:"40320"})]}),(0,a.jsx)(n.annotation,{encoding:"application/x-tex",children:"8!=40320"})]})})}),(0,a.jsxs)(n.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(n.span,{className:"base",children:[(0,a.jsx)(n.span,{className:"strut",style:{height:"0.6944em"}}),(0,a.jsx)(n.span,{className:"mord",children:"8"}),(0,a.jsx)(n.span,{className:"mclose",children:"!"}),(0,a.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(n.span,{className:"mrel",children:"="}),(0,a.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(n.span,{className:"base",children:[(0,a.jsx)(n.span,{className:"strut",style:{height:"0.6444em"}}),(0,a.jsx)(n.span,{className:"mord",children:"40320"})]})]})]})})," of them), and output the first that satisfies all constraints. If you don't know about backtracking algorithm, you can still get assistance from the ",(0,a.jsx)(n.code,{children:"next_permutation"})," function provided by ",(0,a.jsx)(n.code,{children:"algorithm"}),". This is a typical Bronze solution: because of the small input size, we can ",(0,a.jsx)(n.em,{children:"choose"})," a solution after an enumeration instead of ",(0,a.jsx)(n.em,{children:"constructing"})," one."]}),"\n",(0,a.jsx)(n.p,{children:"However, this approach may be less obvious to some experienced candidates. These candidates will attempt to construct a solution through the constraints. This needs some greedy strategy: to achieve the lowest lexicographical order, we need to have the smallest cow possible at every position. We can view an ordering as a \"constraint chain\", where every cow has only one possible location due to the cows that it must be adjacent to. After joining each chain, we can choose the smallest cow that hasn't been settled yet\u2014but this cow cannot have two unmet constraints, since the cows at both ends of a chain can only be connected to one neighboring cow. After fixing the chain's head, we can naturally generate the entire chain. Repeat the same process until all cows have been settled."}),"\n",(0,a.jsx)(n.h2,{id:"program",children:"Program"}),"\n",(0,a.jsx)(n.p,{children:"Brute-force enumeration:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-cpp",children:'/**\n * Adopted from official solution at\n * http://www.usaco.org/current/data/sol_lineup_bronze_dec19.html\n */\n#include <iostream>\n#include <fstream>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\n\nstring names[8] = {"Beatrice", "Belinda", "Bella", "Bessie", "Betsy", "Blue", "Buttercup", "Sue"};\n// beside_a[i] and beside_b[i] denote one pair of neighboring cows\nvector<string> beside_a, beside_b;\nint n;\n\nint getID(string name) {\n    for (int i = 0; i < 8; i++)\n        if (names[i] == name)\n            return i;\n    return -1;\n}\n\nbool satisfies_constraints() {\n    for (int i = 0; i < n; i++)\n        if (abs(getID(beside_a[i]) - getID(beside_b[i])) != 1)\n            return false;\n    return true;\n}\n\nint main() {\n    ifstream fin("lineup.in");\n    ofstream fout("lineup.out");\n    fin >> n;\n    string a, b;\n    for (int i = 0; i < n; i++) {\n        fin >> a >> b >> b >> b >> b >> b;\n        beside_a.push_back(a);\n        beside_b.push_back(b);\n    }\n    // Iterate over all permutations of the 8 cows, and output the first valid solution\n    do {\n        if (satisfies_constraints()) {\n            for (int i = 0; i < 8; i++)\n                fout << names[i] << endl;\n            return 0;\n        }\n    } while (next_permutation(names.begin(), names.end()));\n    return 0;\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:"Construction:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-cpp",children:'#include <iostream>\n#include <fstream>\n\nusing namespace std;\n\nstruct cow {\n    int adj[2];  // ID(s) of the cow(s) that need to be neighboring this cow\n    int adjcnt;  // Number of constraints for this cow; decides if this cow can be put at the head of a constraint chain.\n    bool chosen; // If already in the ordering\n} cows[8];\nstring names[8] = {"Beatrice", "Belinda", "Bella", "Bessie", "Betsy", "Blue", "Buttercup", "Sue"};\n\nint getID(string name) {\n    for(int i = 0; i < 8; i++)\n        if(names[i] == name)\n            return i;\n    return -1;\n}\n\nint main() {\n    ifstream fin("lineup.in");\n    ofstream fout("lineup.out");\n    int n;\n    fin >> n;\n    string a, b;\n    for (int i = 0; i < n; i++) {\n        fin >> a >> b >> b >> b >> b >> b;\n        cows[getID(a)].adj[cows[getID(a)].adjcnt++] = getID(b);\n        cows[getID(b)].adj[cows[getID(b)].adjcnt++] = getID(a);\n    }\n    int prev = -1;\n    // On every iteration add a cow to the ordering. If the last cow has no additional constraints, we may choose a new one; otherwise, we need to choose the one that the constraint requires.\n    for (int _ = 0; _ < 8; _++) {\n        if (_ == 0 || cows[prev].adjcnt == 0) {\n            for (int i = 0; i < 8; i++) {\n                if (!cows[i].chosen && cows[i].adjcnt < 2) {\n                    cows[i].chosen = true;\n                    fout << names[i] << endl;\n                    prev = i;\n                    break;\n                }\n            }\n        } else if (cows[prev].adjcnt == 1) {\n            int i = cows[prev].adj[0];\n            cows[i].chosen = true;\n            // Add cow[i] to the ordering, and "delete" the constraint already satisfied\n            cows[i].adjcnt--;\n            if(cows[i].adj[0] == prev)\n                cows[i].adj[0] = cows[i].adj[1];\n            fout << names[i] << endl;\n            prev = i;\n        }\n    }\n    return 0;\n}\n'})})]})}n.default=function(e={}){const{wrapper:n}=Object.assign({},(0,t.ah)(),e.components);return n?(0,a.jsx)(n,Object.assign({},e,{children:(0,a.jsx)(m,e)})):m(e)}},4997:function(e,n,s){s.d(n,{Zo:function(){return l},ah:function(){return i}});var a=s(6677);const t=a.createContext({});function i(e){const n=a.useContext(t);return a.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}const r={};function l({components:e,children:n,disableParentContext:s}){let l;return l=s?"function"==typeof e?e({}):e||r:i(e),a.createElement(t.Provider,{value:l},n)}}}]);